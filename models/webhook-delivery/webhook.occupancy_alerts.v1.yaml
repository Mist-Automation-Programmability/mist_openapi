description: ''
type: object
x-examples:
  example-1:
    topic: occupancy-alerts
    events:
      - alert_events:
          - current_occupancy: 10
            map_id: f5d26c7f-1670-4921-a79d-09f887f46b44
            occupancy_limit: 5
            org_id: 6748cfa6-4e12-11e6-9188-0242ac110007
            timestamp: 1594861457
            type: COMPLIANCE-VIOLATION
            zone_id: b83312a7-7269-4ae1-bea8-e7cfe0e3073c
            zone_name: PLM and Leadership
          - current_occupancy: 20
            map_id: f5d26c7f-1670-4921-a79d-09f887f46b44
            occupancy_limit: 10
            org_id: 6748cfa6-4e12-11e6-9188-0242ac110007
            timestamp: 1594861457
            type: COMPLIANCE-VIOLATION
            zone_id: 80acf542-e863-43cf-9efd-9295468585e7
            zone_name: CSQA
          - current_occupancy: 9
            map_id: f5d26c7f-1670-4921-a79d-09f887f46b44
            occupancy_limit: 4
            org_id: 6748cfa6-4e12-11e6-9188-0242ac110007
            timestamp: 1594861457
            type: COMPLIANCE-VIOLATION
            zone_id: a4c7a7c2-880e-4a0e-9626-02e5a9471f86
            zone_name: Marketing & Sales Ops
        site_id: 67970e46-4e12-11e6-9188-0242ac110007
        site_name: 'TRUE MIST OFFICE [STAGING]'
properties:
  topic:
    type: string
    minLength: 1
  events:
    type: array
    uniqueItems: true
    minItems: 1
    items:
      type: object
      properties:
        alert_events:
          type: array
          uniqueItems: true
          minItems: 1
          description: |
            list of occupancy alerts for non-compliance zones within the site detected around the same time
          items:
            type: object
            properties:
              current_occupancy:
                type: number
              map_id:
                type: string
                minLength: 1
              occupancy_limit:
                type: number
              org_id:
                type: string
                minLength: 1
              timestamp:
                type: number
              type:
                type: string
                minLength: 1
                description: |
                  event type (COMPLIANCE-VIOLATION / COMPLIANCE-OK)
                enum:
                  - COMPLIANCE-VIOLATION
                  - COMPLIANCE-OK
              zone_id:
                type: string
                minLength: 1
              zone_name:
                type: string
                minLength: 1
            required:
              - current_occupancy
              - map_id
              - occupancy_limit
              - org_id
              - timestamp
              - type
              - zone_id
              - zone_name
        site_id:
          type: string
          minLength: 1
        site_name:
          type: string
          minLength: 1
      required:
        - site_id
        - site_name
required:
  - topic
  - events
