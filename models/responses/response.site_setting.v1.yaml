description: ''
type: object
x-examples:
  example-1:
    rtsa:
      enabled: false
      app_waking: false
      disable_pressure_sensor: false
      disable_dead_reckoning: false
      track_asset: false
    wifi:
      enabled: true
      mesh_enabled: true
      cisco_enabled: true
      proxy_arp: default
      enable_arp_spoof_check: false
      locate_connected: false
      locate_unconnected: false
      enable_shared_radio_scanning: false
      disable_11k: false
      disable_radios_when_power_constrained: false
      enable_vna: false
    persist_config_on_device: false
    device_updown_threshold: 0
    occupancy:
      clients_enabled: true
      sdkclients_enabled: true
      assets_enabled: true
      unconnected_clients_enabled: false
      min_duration: 3000
    zone_occupancy_alert:
      enabled: true
      threshold: 5
      email_notifiers:
        - foo@juniper.net
        - bar@juniper.net
    radio_config:
      band_24:
        disabled: false
        channels:
          - 1
          - 6
          - 11
        bandwidth: 20
        power: 16
      band_5:
        disabled: false
        channels: null
        bandwidth: 40
        power: 0
        preamble: short
        power_min: 10
        power_max: 18
      ant_gain_24: 7
      ant_gain_5: 4
      model_specific:
        AP61:
          band_5:
            disabled: false
            channels:
              - 100
              - 104
            bandwidth: 40
            power: 0
          ant_gain_24: 4
          ant_gain_5: 5
        AP43:
          band_24_usage: '5'
    enable_channel_144: false
    rogue:
      enabled: false
      honeypot_enabled: true
      min_rssi: -80
      min_duration: 10
      whitelisted_ssids:
        - NeighborSSID
      whitelisted_bssids:
        - cc-8e-6f-d4-bf-16
        - cc-8e-6f-d4-bf-16
    led:
      enabled: true
      brightness: 255
    vars:
      RADIUS_SECRET: 11s64632d
      RADIUS_IP1: 172.31.2.5
      DYNAMIC_VLANS: '{"enabled": true,"type": "airespace-interface-name","vlans":{"131": "default","322": "fast,video"}"default_vlan_id": 999,"local_vlan_ids": []}'
    auto_upgrade:
      enabled: true
      version: beta
      time_of_day: '12:00'
      day_of_week: sun
      custom_versions:
        AP41: 0.1.5135
        AP61: 0.1.7215
        AP21: stable
    status_portal:
      enabled: true
      hostnames:
        - my.misty.com
    remote_syslog:
      enabled: true
      send_to_all_servers: true
      servers:
        - host: syslogd.internal
          port: 514
          protocol: udp
          facility: config
          severity: info
          tag: ''
    engagement:
      dwell_tags:
        passerby: null
        bounce: null
        engaged: 300-14400
        stationed: 14400-43200
      max_dwell: 43200
      hours:
        mon: '09:00-17:00'
        fri: '09:00-17:00'
      dwell_tag_names:
        passerby: Passer By
        bounce: Bounce
        engaged: Engaged
        stationed: Stationed
    analytic:
      enabled: false
    flags:
      way1: 3
      way2: 0
      teleport: false
    ble_config:
      power_mode: custom
      power: 10
      beacon_enabled: true
      beacon_rate_mode: custom
      beacon_rate: 3
      beam_disabled:
        - 1
        - 3
        - 6
      ibeacon_enabled: true
      ibeacon_uuid: f3f17139-704a-f03a-2786-0400279e37c3
      ibeacon_major: 13
      ibeacon_minor: 138
      ibeacon_adv_power: -65
      ibeacon_beams: '2-4,7'
      eddystone_uid_enabled: false
      eddystone_uid_namespace: 2818e3868dec25629ede
      eddystone_uid_instance: 5c5b35000001
      eddystone_uid_freq_msec: 200
      eddystone_uid_adv_power: -65
      eddystone_uid_beams: '2-4,7'
      eddystone_url_enabled: false
      eddystone_url_url: 'https://www.abc.com'
      eddystone_url_freq_msec: 1000
      eddystone_url_adv_power: -65
      eddystone_url_beams: '2-4,7'
    wids:
      repeated_auth_failures:
        threshold: 4
        duration: 60
    proxy:
      url: 'http://proxy.internal:8080/'
    ssh_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAA...Wxa6p6UW0ZbcP john@host
    mxtunnel:
      enabled: false
      vlan_ids:
        - 3
        - 5
        - 6
      ap_subnets: 0.0.0.0/0
      protocol: udp
      mtu: 1100
      clusters:
        - name: primary
          tunterm_hosts:
            - mxedge1
            - mxedge2.local
      hello_interval: 60
      hello_retries: 3
      radsec:
        enabled: true
        auth_servers:
          - host: 1.2.3.4
            port: 1812
            secret: testing123
          - host: radius.internal
            port: 1812
            secret: testing123
        acct_servers:
          - host: 1.2.3.4
            port: 1812
            secret: testing123
        use_mxedge: true
    gateway_mgmt:
      app_usage: false
    skyatp:
      enabled: true
      send_ip_mac_mapping: true
    switch_mgmt:
      root_password: asdfh61316saf
      config_revert_timer: 10
    ntp_servers:
      - pool.ntp.org
    ip_config:
      dns:
        - 8.8.8.8
      dns_suffix:
        - .mist.local
    networks:
      default:
        vlan_id: 1
      corp:
        vlan_id: 60
      guest:
        vlan_id: 70
        subnet: '192.168.60,0/24'
        gateway: 192.168.60.1
        dns:
          - 8.8.8.8
          - 4.4.4.4
        dns_suffix:
          - .mist.local
          - .mist.com
      mgmt:
        vlan_id: 500
      voip:
        vlan_id: 50
        subnet: 192.168.50.0/24
        gateway: 192.168.60.1
        dns:
          - 8.8.8.8
          - 4.4.4.4
        dns_suffix:
          - .mist.local
          - .mist.com
    oob_ip_config:
      type: static
      network: mgmt
      ip: 192.168.50.3
      mgmt_only: true
    other_ip_configs:
      guest:
        type: static
        ip: 192.168.70.1
        dhcp:
          enabled: true
          type: local
          ip_start: 192.167.70.100
          ip_end: 192.167.70.200
    routings:
      master: {}
      corp:
        networks:
          - corp
          - iot
        ospf: {}
    port_usages:
      ap:
        mode: trunk
        all_networks: true
        stp_edge: true
        mtu: 9192
        networks:
          - guest
          - corp
        port_network: mgmt
        disabled: true
        description: WAP
        voip_network: voip
      uplink:
        mode: trunk
        all_networks: true
        stp_edge: false
        port_network: default
      iot:
        mode: access
        stp_edge: true
        port_network: default
      default:
        mode: access
        stp_edge: false
        port_network: default
      dynamic:
        mode: dynamic
        rules:
          - src: lldp_system_name
            expression: '[0:3]'
            equals: SENSOR
            usage: iot
      user:
        mode: access
        stp_edge: true
        port_network: default
        port_auth: dot1x
        enable_mac_auth: false
        guest_network: null
        bypass_auth_when_server_down: false
        speed: 1g
        duplex: full
        disable_autoneg: false
        mac_limit: 2
        poe_disabled: true
        storm_control:
          percentage: 80
          no_multicast: false
          no_unknown_unicast: true
          no_broadcast: true
    radius_config:
      auth_servers_timeout: 5
      auth_servers_retries: 3
      auth_servers:
        - host: 1.2.3.4
          port: 1812
          secret: testing123
        - host: radius.internal
          port: 1812
          secret: testing123
      acct_servers:
        - host: 1.2.3.4
          port: 1812
          secret: testing123
      acct_interim_interval: 0
      network: default
    switch_matching:
      enable: true
      rules:
        - name: match by name
          'match_name[0:3]': abc
          match_model: EX4300
          port_config:
            ge-0/0/0:
              usage: uplink
            'ge-0/0/8-16,ge-1/0/0-47':
              usage: ap
            '*':
              usage: default
          additional_config_cmds:
            - set snmp community public
        - name: match by role
          match_role: access
          port_config:
            ge-0/0/0:
              usage: uplink
          additional_config_cmds:
            - set snmp community public2
    additional_config_cmds: []
properties:
  id:
    type: string
    minLength: 1
  for_site:
    type: boolean
  site_id:
    type: string
    minLength: 1
  org_id:
    type: string
    minLength: 1
  created_time:
    type: integer
  modified_time:
    type: integer
  rtsa:
    type: object
    description: |
      managed mobility
    properties:
      enabled:
        type: boolean
      app_waking:
        type: boolean
        description: |
          default is false
      disable_pressure_sensor:
        type: boolean
      disable_dead_reckoning:
        type: boolean
      track_asset:
        type: boolean
        description: asset tracking related
  wifi:
    $ref: ../site_objects/site_wifi.v1.yaml
  persist_config_on_device:
    type: boolean
    description: |
      whether to store the config on AP, default is false
  device_updown_threshold:
    description: |
      sending AP_DISCONNECTED event in device-updowns only if AP_CONNECTED is not seen within the threshold, in minutes, 0 - 30, default is 0
    type: integer
  occupancy:
    $ref: ../site_objects/occupancy_analytics.v1.yaml
  zone_occupancy_alert:
    $ref: ../site_objects/zone_occupancy_alert.v1.yaml
  radio_config:
    $ref: ../device_ap_objects/ap.radio.v1.yaml
  enable_channel_144:
    type: boolean
    description: |
      whether to enable channel 144 (some older clients may not support it), default is false
  rogue:
    $ref: ../site_objects/site_rogue.v1.yaml
  led:
    $ref: ../device_ap_objects/ap.led.v1.yaml
  vars:
    type: object
  auto_upgrade:
    $ref: ../site_objects/auto_upgrade.v1.yaml
  status_portal:
    type: object
    properties:
      enabled:
        type: boolean
      hostnames:
        type: array
        items:
          type: string
  remote_syslog:
    $ref: ../server_objects/remote_syslog.v1.yaml
  engagement:
    $ref: ../site_objects/engagement.v1.yaml
  analytic:
    type: object
    description: ''
    properties:
      enabled:
        type: boolean
        description: |
          enable Advanced Analytic feature, default is false (using SUB-ANA license)
  flags:
    type: object
    description: |
      name/val pair objects for location engine to use
  ble_config:
    $ref: ../device_ap_objects/ap.ble.v1.yaml
  wids:
    $ref: ../site_objects/wids.v1.yaml
  proxy:
    type: object
    description: |
      Proxy Configuration for APs to talk to Mist
    properties:
      url:
        type: string
        minLength: 1
  ssh_keys:
    type: array
    description: |
      when limit_ssh_access = true in Org Setting, list of SSH public keys provided by Mist Support to install onto APs (see Org:Setting)
    items:
      type: object
      description: ''
  mxtunnel:
    $ref: ../common/mxtunnel.v1.yaml
  gateway_mgmt:
    $ref: ../site_objects/site_gateway.v1.yaml
  skyatp:
    type: object
    properties:
      enabled:
        type: boolean
      send_ip_mac_mapping:
        type: boolean
  switch_mgmt:
    type: object
    properties:
      root_password:
        type: string
        minLength: 1
        description: switches root password
      config_revert_timer:
        type: integer
        description: 'the rollback timer for commit confirmed. Default is 10, valid range should be 1-30.'
  ntp_servers:
    type: array
    description: |
      list of NTP servers
    items:
      type: string
  ip_config:
    $ref: ../junos_objects/junos.ip_config.v1.yaml
  networks:
    $ref: ../junos_objects/junos.networks.v1.yaml
  oob_ip_config:
    $ref: ../junos_objects/junos.ip_config.v1.yaml
  other_ip_configs:
    $ref: ../junos_objects/junos.other_ip_configs.v1.yaml
  routings:
    anyOf:
      - properties:
          networks:
            type: array
            items:
              type: string
          ospf:
            type: object
    type: object
  port_usages:
    $ref: ../junos_objects/junos.port_usages.v1.yaml
  radius_config:
    $ref: ../junos_objects/junos.radius_config.v1.yaml
  switch_matching:
    $ref: ../template_switch/template_switch.matching.v1.yaml
  additional_config_cmds:
    type: array
    description: 'additional CLI commands to append to the generated switches config '
    items:
      type: string
  report_gatt:
    type: boolean
    description: |
      default is false; whether AP should periodically connect to BLE devices and report GATT device info (device name, manufacturer name, serial number, battery %, temperature, humidity)
  track_anonymous_devices:
    description: |
      default is false; whether to track anonymous BLE assets (requires ‘track_asset’ enabled)
    type: boolean
  track_asset:
    type: boolean
    description: |
      enable Asset Tracking, default is false (using SUB-AST license)
required:
  - id
  - for_site
  - site_id
  - org_id
  - created_time
  - modified_time
  - radius_config
  - switch_matching
