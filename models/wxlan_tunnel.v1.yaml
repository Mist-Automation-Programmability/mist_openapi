description: WxLAn Tunnel
type: object
x-examples:
  example-static_session_id:
    name: HQ
    peers:
      - 63.3.2.4
    use_udp: true
    udp_port: 1701
    mtu: 0
    for_mgmt: false
    hello_interval: 60
    hello_retries: 3
    is_static: true
    sessions:
      - remote_session_id: 3000
        local_session_id: 4000
        ethertype: ethernet
        comment: something about this session
        enable_cookie: false
  example-static_ap_as_session_ids:
    name: HQ
    peers:
      - 63.3.2.4
    use_udp: true
    udp_port: 1701
    mtu: 0
    for_mgmt: false
    hello_interval: 60
    hello_retries: 3
    is_static: true
    sessions:
      - use_ap_as_session_ids: true
        ap_session_id: apmac
        ethertype: ethernet
        comment: something about this session
  example-static_pseudo_802.1Q_ipsec:
    name: HQ
    peers:
      - 63.3.2.4
    use_udp: true
    udp_port: 1701
    mtu: 0
    for_mgmt: false
    hello_interval: 60
    hello_retries: 3
    is_static: true
    sessions:
      - remote_session_id: 3000
        local_session_id: 4000
        ethertype: vlan
        pseudo_8021ad_enabled: true
        comment: something about this session
    ipsec:
      enabled: true
      psk: cisco123
  example-dynamic:
    name: HQ
    peers:
      - 63.3.2.4
    use_udp: true
    udp_port: 1701
    mtu: 0
    for_mgmt: false
    hello_interval: 60
    hello_retries: 3
    is_static: false
    secret: secret used for tunnel
    router_id: '0'
    hostname: ''
    sessions:
      - remote_id: vpn1
        ethertype: ethernet
        comment: something about this session
      - remote_id: vpn1
        ethertype: vlan
        comment: a vlan'ed session
      - remote_id: vpn1
        ethertype: vlan
        pseudo_8021ad_enabled: true
        comment: a vlan'ed session
properties:
  id:
    type: string
    minLength: 1
    readOnly: true
  org_id:
    type: string
    minLength: 1
  site_id:
    type: string
    minLength: 1
    readOnly: true
  created_time:
    type: integer
    readOnly: true
  modified_time:
    type: integer
    readOnly: true
  name:
    type: string
    minLength: 1
    description: The name of the tunnel
  peers:
    type: array
    description: list of remote peers’ IP or hostname
    items:
      type: string
  use_udp:
    type: boolean
    description: 'whether to use UDP instead of IP (proto=115, which is default of L2TPv3). Default is false'
  udp_port:
    type: integer
    description: udp port if use_udp=true
  mtu:
    type: integer
    description: '0 to enable PMTU, 552-1500 to start PMTU with a lower MTU, default is 0'
  for_mgmt:
    type: boolean
    description: 'default is false, determined during creation time and cannot be toggled. A management tunnel cannot be used by wxlan rule or by wlan'
  hello_interval:
    type: number
    description: 'in seconds, used as heartbeat to detect if a tunnel is alive. AP will try another peer after missing N hellos specified by hello_retries. between 1 and 300, default is 60 seconds'
    minimum: 1
    maximum: 300
  hello_retries:
    type: integer
    description: 'between 2 and 30, default is 7'
  secret:
    type: string
    minLength: 1
    description: 'secret, ‘’ if no auth is used'
  router_id:
    type: string
    minLength: 1
    description: 'optional, overwrite the router-id in SCCRQ control message, default is “0” or null, can also be an IPv4 address'
  hostname:
    type: string
    description: |
      optional, overwrite the hostname in SCCRQ control message, default is “” or null, %H and %M can be used, which will be replace with corresponding values. %H: name of the ap if provided (and will be stripped so it can be used for hostname) and fallbacks to MAC, %M: MAC (e.g. 5c5b350e0060)
  sessions:
    type: array
    uniqueItems: true
    minItems: 1
    description: 'sessions to be established with the tunnel. Has to be >= 1 in order for this tunnel to be useful. For management tunnel, it can only have 1'
    items:
      type: object
      properties:
        remote_session_id:
          type: number
          description: 1-4294967295
          minimum: 1
          maximum: 4294967295
        local_session_id:
          type: number
          description: 1-4294967295
          minimum: 1
          maximum: 4294967295
        ethertype:
          type: string
          minLength: 1
          description: 'ethernet / vlan, default is ethernet'
          enum:
            - ethernet
            - vlan
        enable_cookie:
          type: boolean
        remote_id:
          type: string
          description: 'remote-id of the session, has to be unique in the same tunnel'
        use_ap_as_session_ids:
          type: boolean
          description: 'whether to use AP (last 4 bytes of MAC currently) as session ids, default is false.'
        ap_as_session_id:
          type: string
          description: 'if use_ap_as_session_ids=true, only apmac is supported right now. This is the name WLAN should use for wxtunnel_remote_id'
        pseudo_802.1ad_enabled:
          type: boolean
          description: 'optional, default is False. Enables the pseudo 802.1ad QinQ mode where the AP device drops the outer vlan tag (QinQ). This mode is useful when tunneling Mist AP’s to some aggregation routers.'
        comment:
          type: string
          description: 'optional, user-specified string for display purpose'
  is_static:
    type: boolean
    description: 'whether it’s static/unmanaged (i.e. no control session), default is False. As the session configurations are not compatible, cannot be toggled.'
  dmvpn:
    type: object
    description: Dynamic Multipoint VPN configurations
    properties:
      enabled:
        type: boolean
        description: whether DMVPN is enabled (default is false)
      host_routes:
        type: array
        description: optional; list of IPv4 DMVPN peer host ip-addresses to which traffic is forwarded
        items:
          type: string
      holding_time:
        type: integer
        description: optional; the holding time for NHRP ‘registration requests’ and ‘resolution replies’ sent from the Mist AP (in seconds); default 600
  ipsec:
    type: object
    required:
      - psk
    description: IPSec-related configurations; requires DMVPN be enabled
    properties:
      enabled:
        type: boolean
        description: whether ipsec is enabled (default is false); requires DMVPN be enabled
      psk:
        type: string
        minLength: 1
        description: ipsec pre-shared key
required:
  - name
  - peers
  - udp_port
  - sessions
title: ''
