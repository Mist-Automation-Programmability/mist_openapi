properties:
  canary_phases:
    default:
    - 1
    - 10
    - 50
    - 100
    description: "phases for canary deployment. Each phase represents percentage of\
      \ AP\u2019s that need to be upgraded. default is [1, 10, 50, 100]"
    items:
      type: integer
    type: array
  device_ids:
    items:
      format: uuid
      type: string
    type: array
  enable_p2p:
    description: whether to allow local AP-to-AP FW upgrade
    type: boolean
  force:
    default: false
    description: true will force upgrade when requested version is same as running
      version
    type: boolean
  max_failure_percentage:
    default: 5
    description: percentage of failures allowed across the entire upgrade(not applicable
      for `big_bang`)
    maximum: 100
    minimum: 0
    type: number
  max_failures:
    description: number of failures allowed within each phase(applicable for `canary`
      or `rrm`). Will be used if provided, else max_failure_percentage will be used
    items:
      type: integer
    type: array
  models:
    $ref: '../schemas/string_list.yml'
  p2p_cluster_size:
    default: 10
    example: 0
    minimum: 0
    type: integer
  p2p_parallelism:
    description: number of parallel p2p download batches to creat
    type: integer
  reboot:
    default: false
    description: Reboot device immediately after upgrade is completed (Available on
      Junos OS devices)
    type: boolean
  reboot_at:
    description: reboot start time in epoch seconds, default is `start_time`
    example: 1624399840
    type: number
  rrm_first_batch_percentage:
    description: "percentage of AP\u2019s that need to be present in the first rrm\
      \ batch"
    example: 2
    type: integer
  rrm_max_batch_percentage:
    description: "max percentage of AP\u2019s that need to be present in each rrm\
      \ batch"
    example: 10
    type: integer
  rrm_mesh_upgrade:
    description: "sequential or parallel (default parallel). Whether to upgrade mesh\
      \ AP\u2019s parallelly or sequentially at the end of the upgrade"
    type: string
  rrm_node_order:
    $ref: '../schemas/upgrade_site_devices_rrm_node_order.yml'
  rrm_slow_ramp:
    description: true will make rrm batch sizes slowly ramp up
    type: boolean
  snapshot:
    default: false
    description: Perform recovery snapshot after device is rebooted (Available on
      Junos OS devices)
    type: boolean
  start_time:
    description: upgrade start time in epoch seconds, default is now
    example: 1624399840
    type: number
  strategy:
    $ref: '../schemas/device_upgrade_strategy.yml'
  version:
    default: latest
    description: specific version / stable
    example: 3.1.5
    type: string
title: Upgrade_Site_Devices
type: object
